# 星瞳网开发文档

[TOC]

## 1 概要



## 2 技术栈说明

推荐系统：

`tensorflow == 2.3`

`numpy`

`pandas`

## 3 创新点



## 4 微信小程序模块



## 5 web前端与推荐系统模块

### 5.1 用户信息采集

  “User Profile”，指的是结合用户人口学特征、网络浏览内容、网络社交活动和消费行为等信息而抽象出的标签化的用户模型，其核心主要是通过对海量数据的挖掘，给用户贴上能表示其维度特征的“标签”，用于后续的数据分析和业务运营

  用户画像的构建过程可分为3个步骤：数据采集、数据标签化和生成画像。

#### 5.1.1 数据采集

  用户画像所需的数据可划分为静态数据和动态数据两类。

  静态数据通常涉及用户的人口属性、空间属性、社交属性、消费属性和金融属性等维度，这些数据可以通过定性的开放式问题来获取，也可以通过定量的问卷调研来获取，主要目的在于了解用户的真实需求，进而具象用户特征。

  动态数据则主要是用户不断变化的行为特征数据（场景、媒体、路径等），这些数据通常都会被相应的互联网产品或平台记录下来，获取难度相对较低。

#### 5.1.2 数据标签化

  用户画像的目的之一就是通过对用户数据的分析为每个用户打上相应的标签，并为标签赋予不同的权重，所以就需要将用户数据映射到构建的标签体系中，并将用户的多种特征组合到一起。

  标签的选择会直接影响到最终画像的丰富度与准确度，因而数据标签化时需要与产品自身的功能与特点相结合。比如电商类平台需对价格敏感度相关标签进行细化，而短视频平台则需要尽可能多视角地用标签去描述视频内容的特征。

#### 5.1.3 生成画像

  在把用户数据标签化之后，通过相应的模型或工具，即可生成相应的用户画像，可以是囊括了各种标签的Excel表格，也可以是一张可视化的画像

### 5.2 新闻推荐

#### 5.2.1 基于九天深度平台云上AI的推荐系统算法设计

  根据信息化服务平台的具体需求，结合平台的软硬件条件，融入当前流行的智能推荐算法，最终设计出适合系统的模型。模型以用户兴趣爱好为导向，分析用户日常访问日志，结合相邻用户的兴趣及行为特点，最终推荐出适合用户的相关资讯。
  具体实现策略如下:
  1)判断用户是否新用户，如果用户是新用户，则按照新闻的访问量由高到低推荐给新用户;如果用户不是新用户，则通过后台记录的信息上传至移动云平台并基于SVD推荐算法推荐新闻。
  2)用户每一次登录网站，实时收集用户的访问时间、访问新闻内容、访问次数等。

  3)通过用户访问日志的分析，计算出该用户对所访问新闻的感兴趣度，并记录进数据库。
  4)使用SVD推荐算法，计算出当前用户可能感兴趣的新闻列表。

  5)以上步骤不断的迭代训练,最终训练出更加准确的模型。
  通过以上过程，使得推荐新闻不再像以前一样，只能推荐访问量由高到低的方式，进而推荐出合适用户的兴趣爱好，大大提高网址的访问量。

#### 5.2.2 基于移动云的智能新闻推荐系统的实现

  基于SVD 算法以及移动云深度平台的智能新闻推荐系统构建方案目的是为视力障碍人群网络信息服务平台做好智能化信息服务。其主要核心思想是利用SVD算法，结合用户的访问日志、兴趣爱好、相邻客户网络行为等基础数据，最终达到人性化的信息服务管理模式，适应当今信息化服务的主流趋势

### 5.3 无障碍显示

#### 5.3.1 指读功能

  &emsp;&emsp;在网页中，鼠标悬停在任何有文字或者有文字说明的DOM元素上都会自带语音指读，调用**九天深度平台**的图片识别与语音交互api,从而主要让弱视群体虽然不能够清楚的看清字体，但通过辅以指读功能达到与正常人一样的浏览效果

#### 5.3.2 纯文本模式

  &emsp;&emsp;考虑到某些css样式可能对视力障碍患者朋友不友好，在纯文本模式中，将网页中的图像等非文本内容转化成文本，并以线性化的显示方式从上到下显示，以满足具有不同访问需求人群的需求。进入纯文本模式后还可以通过点击“切换为可视化模式”按钮返回正常模式。此外，专门为纯文本显示模式的转换功能提供了对应的快捷键，并且该组快捷键的使用不依赖于工具条的开启状态。

#### 5.3.3 文字大小控制

  &emsp;&emsp;可以调整网页的字体大小，包括中等字体、大型字体、超大字体、还原字体等功能，该按钮缺省状态为“中等字体”，通过点击该按钮改变页面的字体大小和按钮状态。在鼠标指针指向文本或者图片会自动放大,基于**移动云平台**的图片处理接口,满足视力障碍患者朋友的不同需求。

#### 5.3.4 高对比度显示

  ​		在用户将鼠标指针移动至新闻标题时,新闻标题自适应变成红色大字体,与网页其他文字形成较为鲜明对比,便于视力障碍患者朋友进行区分与阅读

  

  

### 5.4 记录浏览历史

  星瞳网设计了记录浏览历史的功能,用户可以在前端看到自己的浏览记录,便于用户使用.在后端记录的浏览历史单独建表存储于sql中,为用户画像提供有力的数据

### 5.5 新闻搜索功能

  为了便于视力障碍人士主动获取信息,我们将同时上线特别的新闻搜索功能.可以**基于九天人工智能平台语音交互功能**进行搜索,另外,对于过大的语音我们在前端进行分片,再上传至移动云平台进行解析,将结果传入至我们的服务器并基于我们nlp筛选后精选新闻发布给用户

## 6 web后端

### 平台用户鉴权系统

![file](http://image.openwrite.cn/26803_12DB5BFAB5CB442887FE09272CDDC8FD)

平台分为三个状态：未登录、普通用户以及后台管理

- 未登录：可以浏览默认推荐的新闻
- 普通用户：根据以往的浏览记录，系统自动推送符合用户浏览喜好的新闻

![file](http://image.openwrite.cn/26803_83F435774D1F4A4E94AEC31DFB86966C)



- 后台管理：可以进入后台实时监测平台数据和用户的浏览数据，同时新增新的新闻

### 数据存放和可视化

新闻总计约一万条，训练数据集约十万条，导入至mysql数据库中。同时用户的每次浏览也会同步记录到后台数据库中

后台通过echarts图表进行可视化展示，其中包括饼状图、柱状图、曲线图以及关系图等多种图样

![file](http://image.openwrite.cn/26803_F042F6B12EE04A5095A8B378C4B5F7B2)

![file](http://image.openwrite.cn/26803_1EA4722D734543A5B7BF0024970E7AB8)

- 各类别新闻数量饼状图

通过新闻的类别标签进行实时计算分类得到

- 前十浏览量新闻柱状图

根据用户浏览的次数进行排序获得

- 一周新闻浏览总量时间分布曲线图

将用户的浏览记录按照一周七天的时间进行分类并计算数量

- 前十阅读时长用户相似性关系图

以不同用户之间浏览的相同新闻数量为数据源进行处理，近似得到一个不同用户的浏览习惯相似性，然后通过关系图（由点和边构成，点为用户，边为用户之间的相似性，用户总浏览时长决定点的大小，用户直接的相似程度决定边的大小）来构建用户的相似性

- 前十阅读时长用户柱状图

根据用户浏览的次数进行排序获得

力图使后台使用者简洁明了得获取各类平台数据以及用户习惯，加以更好服务视障人士，优化其浏览新闻的体验

## 7 推荐系统

### 部署说明

#### 介绍

内容采集：通过整合文字内容（保留排版）

推荐算法：权重+标签推荐+行为推荐

- 权重是指特定用户对于特定新闻的评分是基于用户的不同行为以及新闻的特征进行综合评分的，各个指标需要不同的权重
- 标签推荐进行用户标签与内容标签的匹配，按照匹配比例进行的推荐
- 行为推荐进行行为的计算的依据是阅读量、浏览时间、新闻进入的时间

涉及：tensorflow、flask框架、移动云平台

#### 移动云平台部署过程

进入移动云平台，选择弹性计算中的云主机，选择立即订购

![file](http://image.openwrite.cn/26803_27A3D8A288974BCE9B224EC089C98CD1)

基本配置如下：

![file](http://image.openwrite.cn/26803_B37A4FB591F24743AEE49E92AD5BCD11)

![file](http://image.openwrite.cn/26803_B040F92C0A40409F89CF3AE1A6556154)

网络与安全组的配置如下：

![file](http://image.openwrite.cn/26803_681E06CE90E74206A162456F542E31A9)

系统配置如下：

![file](http://image.openwrite.cn/26803_04D63CEACD7040ECA854602D0944E378)

配置成功，可以使用Jupyter lab进行模型的训练。

![file](http://image.openwrite.cn/26803_05B3D015CF134089B8E2445FF427D4D7)

得到训练结果：（用户id为114的用户新闻推荐，迭代次数为1000次）

![file](http://image.openwrite.cn/26803_9E41951DCBD446BBBA0A09D86167AF9E)

### 模型基本定义

| 参数定义          | 参数                                                     |
| ----------------- | -------------------------------------------------------- |
| ratings_df_length | 样本数量，训练集的样本数量为10w+                         |
| num_features      | 特征值拓展特征数量，考虑到数据集较大，总的特征数设置为10 |
| X_parameters      | 新闻内容矩阵X，对应标准偏差值为0.35                      |
| Theta_parameters  | 用户喜好矩阵theta，对应标准偏差值为0.35                  |
| learning_rating   | 学习率，0.0001                                           |

损失函数：
$$
loss = \frac{1}{2} \times \sum(
            (X_{parameters} \times Theta_{parameters} - rating_{norm}) \times record) ^2 +  \frac{1}{2} \times (
                       \sum X_{parameters} ^ 2 + \sum
                   Theta_{parameters} ^ 2)
$$

## 8 部署说明

### 8.1 安装依赖环境

### 8.2 Install

## 9 开源情况

### 9.1 代码开源情况

### 9.2 移动云能力的使用情况

## 10 测试

### 10.1 开发者测试

### 10.2 微信小程序二维码与部署站点

## 11 运营方案

### 11.1 引流策略

&emsp;&emsp;在平台建立之初，能否获取首批用户是重中之重，为此构建了如下引流策略：

- 我们会利用表白墙，联系学生会权益部，宣传这个小程序，尽可能多的让这个小程序为人所熟知，尽快积累第一批用户。

- 社群分享。这个小程序以分享的形式在微信群和考研交流群中流传，由于群里都是身边熟悉的同学和学长学姐，信任度较高，更容易地让用户点击与关注这个小程序；

- 公众号推广。平台将会建立自己的微信公众号“毅研为定”，由专业人士定期撰写发布使用心得，发布推文向大家介绍小程序的使用方法和自信自律的重要性，号召大家一起自律，减少使用手机，扩大小程序的用户群体


### 11.2 存留策略

&emsp;&emsp;在吸引用户后，针对如何通过满足客户的需求，使用户继续访问平台更多的页面、增加在平台上的停留时间以及未来的再次使用，构建如下存留策略：

- 打铁还需自身硬，不断迭代，推出更多更适合学生的功能和模块，建设一个更加美观，功能更加完善的小程序。

- 增加更多的文章，扩充院校库。

- 内嵌更多的js，使得资讯界面更加充实。


### 11.3 转化策略

&emsp;&emsp;用户存留不是最终目的，如何将用户转化才是关键。为了刺激用户转化，构建如下转化策略：

- 设立奖励策略，对在排行耪最前列的用户进行一定程度的奖励，以鼓励更多的考研党使用本小程序，获取足够的高校研究生院的招生信息，同时让大家变得更加自律。

- 此时，我们应该已经拥有了足够规模的用户群体，我们会使用我们积累的数据进行大数据的数学建模，在**九天深度学习**平台中进行训练和建模并且使用**移动云的AI能力**开发出一套推荐算法，实现数据的精准投放。

### 11.4 优化策略

&emsp;&emsp;在运营一段时间后，对相关数据进行分析总结，对运营策略发现如下可调整优化的方面：

- 成立粉丝群，建立社区生态，建立较为稳固的粉丝群体。

- 应用推荐算法，推出精准推送的功能。

- 优化服务回报。分析运营数据，统计各项服务的投入产出比，找出回报大的投入方向。对于低回报的服务进行优化，如果优化后效果不好，减少成本或者放弃；

## 12 总结




